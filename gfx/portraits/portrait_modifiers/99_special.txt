
special_eyelashes = {

	usage = game

	eyelashes = {
		dna_modifiers = {
			accessory = {
				mode = replace
				gene = eyelashes_accessory
				template = no_eyelashes
				value = 0.5
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 200
				scope:age < 10
			}
		}
	}

}

weight = {
	usage = game

	@overweight_multiplier = 0.5
	@underweight_multiplier = -0.5

	overweight = {
		ignore_outfit_tags = yes
		dna_modifiers = {
			morph = {
				mode = modify
				gene = gene_bs_body_type
				value = {
					value = scope:weight_for_portrait # An absolute and normalized value derived from character body weight
					multiply = @overweight_multiplier
				}
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				scope:current_weight > overweight_threshold
			}
			modifier = {
				add = -100
				exists = this
				has_character_flag = has_scripted_weight
			}
		}
	}

	underweight = {
		ignore_outfit_tags = yes
		dna_modifiers = {
			morph = {
				mode = modify
				gene = gene_bs_body_type
				value = {
					value = scope:weight_for_portrait # An absolute and normalized value derived from character body weight
					multiply = @underweight_multiplier
				}
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				scope:current_weight < underweight_threshold
			}
			modifier = {
				add = -100
				exists = this
				has_character_flag = has_scripted_weight
			}
		}
	}

	ruler_designer_overweight = {
		dna_modifiers = {
			morph = {
				mode = modify
				gene = gene_bs_body_type
				value = {
					value = scope:weight_for_portrait # An absolute and normalized value derived from character body weight
					multiply = @overweight_multiplier
				}
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = scope:ruler_designer
				scope:current_weight > overweight_threshold
			}
		}
	}
	ruler_designer_underweight = {
		dna_modifiers = {
			morph = {
				mode = modify
				gene = gene_bs_body_type
				value = {
					value = scope:weight_for_portrait # An absolute and normalized value derived from character body weight
					multiply = @underweight_multiplier
				}
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = scope:ruler_designer
				scope:current_weight < underweight_threshold
			}
		}
	}
}

@muscle_multiply = 1
@muscle_max = 1.0

muscularity = {

	usage = game
	
	muscular = {
		ignore_outfit_tags = yes
		dna_modifiers = {
			morph = {
				mode = modify
				gene = gene_bs_body_shape
				value = {
					value = 0

					if = { 
						limit = { exists = scope:ruler_designer }
						add = scope:prowess
					}
					else_if = {
						limit = { exists = this }
						add = prowess_for_portrait
					}
					else = {
						add = scope:prowess
					}

					#AGOT Modified
					#multiply = 4
					multiply = 2

					max = 1.0
				}
			}
		}
		weight = {
			base = 100
		}
	}
}

special_pregnancy = {

	usage = game

	pregnant = {
		ignore_outfit_tags = yes
		dna_modifiers = {
			morph = {
				mode = add
				gene = gene_bs_pregnant
				template = pregnant
				value = {
					value = 1
					if = {
						# Overweight females should have less visible pregnancy, so we change the 100% pregnant value
						limit = { current_weight > overweight_threshold }
						value = scope:weight_for_portrait # An absolute and normalized value derived from character body weight
						multiply = -1.0 
						add = 1.5
						max = 1.0
					}
					if = {
						limit = {  
							NOT = { this = character:animation_test_female_pregnant }
						}
						multiply = {
							add = pregnancy_days
							# Only change every 10 days
							divide = 10
							round = yes
							multiply = 10
							divide = 250 # PREGNANCY_DAYS is 280; we want 1 month at 100%
							max = 1
						}
					}					
				}
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				portrait_has_trait_trigger = { TRAIT = pregnant }
			}			
		}
	}
}


special_shrink_body = {
	
	usage = game
	shrink_body = {
		dna_modifiers = {
			morph = {
				mode = add
				gene = gene_shrink_body
				template = shrink_all
				value = 1 # For the randomness to work correctly
			}
		}   
		weight = {
			base = 10
		}
	}
}

agot_bodice_shrink_body = {
	usage = game
	bodice_shrink_body = {
		dna_modifiers = {
			morph = {
				mode = add
				gene = gene_shrink_agot
				template = shrink_bodice
				value = 1.0
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				has_gene = {
					category = gene_shrink_agot
					template = shrink_bodice
				}
			}
		}
	}
}

agot_cleavage_shrink_body = {
	usage = game
	bodice_shrink_body = {
		dna_modifiers = {
			morph = {
				mode = add
				gene = gene_shrink_agot
				template = shrink_cleavage
				value = 1.0
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 100
				exists = this
				has_gene = {
					category = gene_shrink_agot
					template = shrink_cleavage
				}
			}
		}
	}
}

additive_headgears = {

	usage = game
	additive_headgears = {
			dna_modifiers = {
			morph = {
				mode = add
				gene = gene_bs_additive_headgears
				template = additive_headgears
				value = 1 
			}
		}
	}
}

cloak_offset = {

	usage = game
	cloak_offset = {
			dna_modifiers = {
			morph = {
				mode = add
				gene = gene_bs_cloak_offset
				template = cloak_offset
				value = 1 # For the randomness to work correctly
			}
		}
	}
}

long_beard = {

	usage = game
	long_beard = {
			dna_modifiers = {
			morph = {
				mode = add
				gene = gene_bs_long_beard
				template = long_beard
				value = 1 # For the randomness to work correctly
			}
		}
	}
}

special_prophet = {

	usage = game
	selection_behavior = weighted_random
	priority = 50

	33922_caliph_muhammad = { # Has no portrait 
		dna_modifiers = {
			morph = {
				mode = replace
				gene = gene_bs_body_type
				template = no_portrait
				value = 1.0
			}
			morph = {
				mode = replace
				gene = complexion
				template = complexion_no_face
				value = 1.0
			}
			morph = {
				mode = replace
				gene = gene_age
				template = no_aging
				value = 1.0
			}
			morph = {
				mode = modify
				gene = gene_eyebrows_shape
				template = no_eyebrows
				value = 0.5
			}
			morph = {
				mode = modify
				gene = gene_eyebrows_fullness
				template = no_eyebrows
				value = 0.5
			}
			accessory = {
				mode = modify
				gene = eye_accessory
				template = no_eyes
				value = 0.5
			}
			accessory = {
				mode = modify
				gene = teeth_accessory
				template = no_teeth
				value = 0.5
			}
			#AGOT Disabled
			# accessory = {
			# 	mode = add
			# 	gene = props_left
			# 	template = prophet_shield
			# 	value = 0.5
			# }
			accessory = {
				mode = add
				gene = clothes
				template = no_clothes
				value = 0.5
			}
			accessory = {
				 mode = add
				 gene = hairstyles
				 template = no_hairstyles
				 value = 0
			}
			accessory = {
				mode = add
				gene = beards
				template = no_beard
				value = 0
			}
			accessory = {
				mode = add
				gene = headgear
				template = no_headgear
				value = 0
			}
			accessory = {
				mode = add
				gene = cloaks
				template = no_cloak
				value = 0
			}  
		}
		weight = {
			base = 0
			modifier = {
				add = 999
				exists = this
				#AGOT Modified
				# exists = character:33922
				# this = character:33922
				OR = {
					has_trait = ruin
					has_trait = line_of_char
				}
			}
		}
	}
}

#AGOT Added
special_seven_pointed_scar = {
	usage = game

	seven_pointed_scar = {
		dna_modifiers = {
			morph = {
				mode = add
				gene = gene_seven_pointed_scar 
				value = 1
				template = seven_pointed_scar
			}
		}

		weight = {
			base = 0
			modifier = {
				add = 1000
				has_character_modifier = the_seven_zealot_modifier 
			}
		}
	}
}

#AGOT Added
special_maelys_two_headed = {
	usage = game

	maelys_two_headed = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = agot_two_headed
				template = maelys_head
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				exists = this
				exists = character:Blackfyre_14
				this = character:Blackfyre_14
			}
		}
	}
}

#AGOT Added
special_agot_parrot = {
	usage = game

	agot_parrot = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = agot_parrot
				template = agot_parrot
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_character_modifier = agot_owns_pet_parrot
			}
		}
	}
}

#AGOT Added
heterochromia_eyes = {
	usage = game

	heterochromia_random = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_random
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				agot_heterochromia_no_overwrite = yes
			}
		}
	}
	
	heterochromia_valyrian = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_valyrian
				range = { 0 1 } # For the randomness to work correctly
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 500
				agot_valyrian_heterochromia = yes
			}
		}
	}
	
	heterochromia_green1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_green1
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_green1 
			}
		}
	}
	heterochromia_green2 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_green2
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				AND = { 
					has_inactive_trait = heterochromia_green2
				}
			}
		}
	}
	heterochromia_blue1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_blue1
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_blue1 
			}
		}
	}
	heterochromia_blue2 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_blue2
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_blue2 
			}
		}
	}
	heterochromia_grey = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_grey
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_grey 
			}
		}
	}
	heterochromia_brown1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_brown1
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_brown1 
			}
		}
	}
	heterochromia_brown2 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_brown2
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_brown2 
			}
		}
	}
	heterochromia_brown3 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_brown3
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_brown3 
			}
		}
	}
	heterochromia_purple1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_purple1
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_purple1 
			}
		}
	}
	heterochromia_purple2 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_purple2
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_purple2 
			}
		}
	}
	
	heterochromia_purple3 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_purple3
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_purple3 
			}
		}
	}
	heterochromia_purple4 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_purple4
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_purple4 
			}
		}
	}
	
	heterochromia_black1 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_black1
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_black1 
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_black1 
			}
		}
	}
	
	heterochromia_black2 = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_black2
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_black2 
			}
		}
	}
	
	heterochromia_gold = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_gold
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_gold 
			}
		}
	}
	
	heterochromia_red = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_red
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1000
				has_inactive_trait = heterochromia_red 
			}
		}
	}
	
	half_blind = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_blind
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 5
				AND = {
					has_trait = half_blind
				}
			}
		}
	}
	
	half_blind_battle = {
		dna_modifiers = {
			accessory = {
				mode = add
				gene = heterochromia_eye
				template = heterochromia_eye_blind
				value = 1
			}
			morph = {
				mode = add
				gene = gene_scars_eye
				value = 1.0
				template = scars_eye
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 5
				agot_halfblind_battle = yes
			}
		}
	}
	
	aged = {
		dna_modifiers = {
			accessory = {
				mode = replace
				gene = eye_accessory
				template = blind_eyes
				value = 1
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 5000
				agot_aged = yes
			}
		}
	}
}

cm_special = {

    usage = game

#	sauron = {
#		dna_modifiers = {
#			accessory = {
#				mode = modify				
#				gene = eye_accessory
#				template = sauron_eyes
#				value = 1.0
#			}
#		}
#		weight = {
#			base = 0
#			modifier = {
#				add = 500
#				AND = {
#					has_trait = blood_of_vizeryon_4
#				}
#			}
#		}
#	}
	vizeryon_blood_eyes_1 = {
		dna_modifiers = {
			accessory = {
				mode = modify				
				gene = eye_accessory
				template = vizeryon_eyes
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1500
				has_trait = blood_of_vizeryon_1
			}
		}	
	}
	vizeryon_blood_eyes_2 = {
		dna_modifiers = {
			accessory = {
				mode = modify				
				gene = eye_accessory
				template = vizeryon_eyes_2
			}
		}
		weight = {
			base = 0
			modifier = {
				add = 1500
				has_trait = blood_of_vizeryon_2
			}
		}	
	}
}